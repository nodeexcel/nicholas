{"version":3,"sources":["../src/db.js"],"names":["db","sequelize","config","name","username","password","port","host","dialect","logging","Object","keys","forEach","modelName","model","DataTypes","err","console","log","associate","sync","then","assign","Sequelize"],"mappings":";;;;;;AAAA;;;;AAEA;;;;AACA;;;;;;AAFA;AAIA,IAAMA,KAAK,EAAX;AACA,IAAMC,YAAY,wBAAc,sBAAYC,MAAZ,CAAmBF,EAAnB,CAAsBG,IAApC,EAA0C,sBAAYD,MAAZ,CAAmBF,EAAnB,CAAsBI,QAAhE,EAA0E,sBAAYF,MAAZ,CAAmBF,EAAnB,CAAsBK,QAAhG,EAA0G,EAAEC,MAAM,sBAAYJ,MAAZ,CAAmBF,EAAnB,CAAsBM,IAA9B,EAAoCC,MAAM,sBAAYL,MAAZ,CAAmBF,EAAnB,CAAsBO,IAAhE,EAAsEC,SAAS,OAA/E,EAAwFC,SAAS,KAAjG,EAA1G,CAAlB;;AAEA;AACAC,OAAOC,IAAP,mBAAoBC,OAApB,CAA4B,UAACC,SAAD,EAAe;AACvC,QAAMC,QAAQ,iBAAOD,SAAP,EAAkBZ,SAAlB,EAA6B,oBAAUc,SAAvC,sBAAd;AACAf,OAAGa,SAAH,IAAgBC,KAAhB;AACH,CAHD,EAGG,UAACE,GAAD,EAAS;AAAEC,YAAQC,GAAR,CAAYF,GAAZ;AAAkB,CAHhC;;AAKA;AACAN,OAAOC,IAAP,CAAYX,EAAZ,EAAgBY,OAAhB,CAAwB,UAACC,SAAD,EAAe;AACnC,QAAIb,GAAGa,SAAH,EAAcM,SAAlB,EAA6B;AACzBnB,WAAGa,SAAH,EAAcM,SAAd,CAAwBnB,EAAxB;AACH;AACJ,CAJD,EAIG,UAACgB,GAAD,EAAS;AAAEC,YAAQC,GAAR,CAAYF,GAAZ;AAAkB,CAJhC;;AAMAf,UAAUmB,IAAV,GAAiBC,IAAjB,CAAsB,YAAM,CAAE,CAA9B;;kBAEeX,OAAOY,MAAP,CAAc,EAAd,EAAkBtB,EAAlB,EAAsB;AACjCC,wBADiC;AAEjCsB;AAFiC,CAAtB,C","file":"db.js","sourcesContent":["import Sequelize from \"sequelize\";\n// import migrations from './migrations'\nimport models from \"./models\";\nimport environment from \"./environment.js\";\n\nconst db = {};\nconst sequelize = new Sequelize(environment.config.db.name, environment.config.db.username, environment.config.db.password, { port: environment.config.db.port, host: environment.config.db.host, dialect: 'mysql', logging: false });\n\n// load models\nObject.keys(models).forEach((modelName) => {\n    const model = models[modelName](sequelize, Sequelize.DataTypes, Sequelize);\n    db[modelName] = model;\n}, (err) => { console.log(err) });\n\n// invoke associations on each of the models\nObject.keys(db).forEach((modelName) => {\n    if (db[modelName].associate) {\n        db[modelName].associate(db);\n    }\n}, (err) => { console.log(err) });\n\nsequelize.sync().then(() => {})\n\nexport default Object.assign({}, db, {\n    sequelize,\n    Sequelize\n});"]}